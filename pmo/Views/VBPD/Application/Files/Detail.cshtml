@model List<dbModels.StageFile>

@{
    ViewData["Title"] = "Stage Files";
    Layout = "_VbpdProjectDetailLayout";    
    int projectId = int.Parse(Helpers.GetRouteValue(Context.Request, "projectId"));
    int stageNumber = int.Parse(Helpers.GetRouteValue(Context.Request, "stageNumber"));
}

<div class="actions-component">
    <div class="wrapper">
        <div class="header">
            <h1><i class="icon fas fa-info-circle"></i> @ViewData["Title"]</h1>
        </div>
    </div>
</div>

<div class="list-component">
    <div class="wrapper">
        <div class="title">
            <div>File Type</div>
            <div>Download</div>
            <div>Description</div>
            <div>Created</div>
            <div>Uploaded By</div>
        </div>
        <div class="items">
            @foreach (var upload in Model) {
                <div class="item">
                    <div class="item-wrapper">
                        <div>@upload.FileTag.Name</div>                        
                        <div class="actions">
                            <form method="post" action="/projects/@projectId/stages/@stageNumber/files/download?id=@upload.Id">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="id" value="@upload.Id" />
                                <button type="submit" class="btn blue"><i class="fas fa-download fa-lg"></i> Download</button>
                            </form>
                        </div>
                        <div>@upload.Description</div>
                        <div>@upload.CreateDate</div>
                        <div>@upload.ModifiedByUser</div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>
